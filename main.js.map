{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/js/source/yt.js","webpack:///./src/js/state.js","webpack:///./src/js/player.js","webpack:///./src/js/background.js","webpack:///./src/js/shortcuts.js","webpack:///./src/js/info.js","webpack:///./src/js/media.js","webpack:///./src/js/gestures.js","webpack:///./src/js/index.js","webpack:///./src/js/static.js"],"sourcesContent":["import { State } from '../state';\n\nexport default class YouTube {\n  #state;\n  #iframe;\n\n  constructor(parent) {\n    this.parent = parent;\n    this.player_el = parent.player_el;\n    this.stream_url = parent.stream.url;\n  }\n\n  setup(){\n    let that = this;\n    this.#iframe = document.createElement(\"iframe\");\n    this.#iframe.setAttribute(\"allow\", \"autoplay; encrypted-media;\");\n    this.#iframe.setAttribute(\"src\", this.stream_url + \"?enablejsapi=1\");\n    this.#iframe.addEventListener(\"load\", function (e) { that.play() })\n    this.player_el.appendChild(this.#iframe);\n    this.state = State.STOPPED;\n  }\n\n  get state() {\n    return this.#state;\n  }\n\n  set state (state) {\n    this.#state = state;\n  }\n\n  post_message(message) {\n    this.#iframe.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"' + message + '\",\"args\":\"\"}', '*')\n  }\n\n  play() {\n    this.post_message('playVideo')\n    this.state = State.PLAYING;\n  }\n\n  stop() {\n    this.post_message('stopVideo')\n    this.state = State.STOPPED;\n  }\n\n  destroy() {\n    this.stop()\n    this.#iframe.remove();\n    this.#iframe = undefined;\n    this.state == undefined;\n  }\n}\n","export const State = {\n  \"STOPPED\": 0,\n  \"PLAYING\": 1\n}\n","import YouTube from \"./source/yt.js\"\nimport { State } from './state';\n\nexport default class Player {\n  STREAMS_URL = \"streams.json\"\n\n  SOURCES = {\n    \"www.youtube.com\": YouTube\n  }\n\n  constructor (parent) {\n    this.parent = parent\n    this.player_el = parent.player_el;\n  }\n\n  get_json(url, callback) {\n    return fetch(url)\n      .then(function(response) {\n        if (!response.ok) {\n          throw new Error(\"HTTP error, status = \" + response.status);\n        }\n        return response.json();\n      })\n  }\n\n  handle_streams(streams) {\n    this.streams = streams;\n  }\n\n  random_choice(arr){\n    return arr[Math.floor(Math.random() * arr.length)];\n  }\n\n  random_stream() {\n    var that = this;\n    let streams = Object.keys(this.streams).map(function (key) {\n      return that.streams[key];\n    });\n    return this.random_choice(streams);\n  }\n\n  change_stream () {\n    this.stream = this.random_stream();\n  }\n\n  start_stream() {\n    if (!this.stream && localStorage.getItem(\"stream\")) {\n      this.stream = this.streams[localStorage.getItem(\"stream\")]\n    }\n    else {\n      this.change_stream();\n    }\n    if (this.source) {this.source.destroy()}\n    this.parent.info.update_stream(this.stream);\n\n    const stream_url = new URL(this.stream.url);\n    this.source = new this.SOURCES[stream_url.hostname](this);\n    this.source.setup()\n    localStorage.setItem(\"stream\", this.stream.id);\n  }\n\n  pause() {\n    this.source.stop();\n  }\n\n  play() {\n    this.source.play();\n  }\n\n  toggle() {\n    if (this.source.state == State.PLAYING) {\n      this.source.stop();\n      return;\n    }\n    else if (this.source.state == State.STOPPED) {\n      this.source.play();\n      return;\n    }\n  }\n\n  clear(){\n    if (this.source) {this.source.destroy()};\n  }\n\n  start() {\n    this.get_json(this.STREAMS_URL, this.handle_streams)\n      .then(this.handle_streams.bind(this))\n      .then(this.start_stream.bind(this))\n  }\n}\n","export default class BackgroundVideo {\n  BACKGROUND_VIDEO_URL = \"backgrounds.json\"\n\n  constructor (parent) {\n    this.parent = parent;\n    this.background_video_el = parent.background_video_el;\n    this.background_video_el.defaultPlaybackRate = 0.5;\n  }\n\n  get_json(url, callback) {\n    return fetch(url)\n      .then(function(response) {\n        if (!response.ok) {\n          throw new Error(\"HTTP error, status = \" + response.status);\n        }\n        return response.json();\n      })\n      .then(callback.bind(this))\n  }\n\n  handle_backgrounds(backgrounds) {\n    this.backgrounds = backgrounds;\n  }\n\n  random_choice(arr){\n    return arr[Math.floor(Math.random() * arr.length)];\n  }\n\n  random_background() {\n    var that = this;\n    let backgrounds = Object.keys(this.backgrounds).map(function (key) {\n      return that.backgrounds[key];\n    });\n    return this.random_choice(backgrounds)\n  }\n\n  stream_changed() {\n    var that = this;\n    if (localStorage.getItem(\"bg-\" + that.parent.player.stream.id)) {\n      that.background = that.backgrounds[that.parent.player.stream.id];\n      that.update_background(this.background)\n      that.parent.info.update_background(that.background);\n    }\n    else {\n      that.change();\n    }\n  }\n\n  update_background (background) {\n    this.background_video_el.setAttribute(\"src\", background.url);\n  }\n\n  change() {\n    this.background = this.random_background()\n    this.update_background(this.background);\n    this.parent.info.update_background(this.background);\n    if (this.parent.player.stream) {\n      localStorage.setItem(\"bg-\" + this.parent.player.stream.id, this.background.id);\n    }\n\n  }\n\n  get_backgrounds() {\n    return this.get_json(this.BACKGROUND_VIDEO_URL, this.handle_backgrounds)\n  }\n\n  start() {\n    this.get_backgrounds()\n      .then(this.change.bind(this))\n  }\n}\n","export default class Shortcuts {\n  KEY_MAP = {\n    \"Space\": this.playpause,\n    \"ArrowRight\": this.next_station,\n    \"ArrowLeft\": this.prev_station,\n    \"ArrowDown\": this.change_background,\n    \"ArrowUp\": this.change_background\n  }\n\n  media;\n\n  constructor(parent) {\n    this.parent = parent;\n  }\n\n  setup() {\n    const that = this;\n    document.addEventListener(\"keyup\", (e) => {\n      e = e || window.event;\n\n      if (e.code in this.KEY_MAP) {\n        this.KEY_MAP[e.code].call(that, e)\n      }\n    })\n  }\n\n  playpause () {\n    this.parent.player.toggle();\n  }\n\n  next_station () {\n    this.parent.player.change_stream()\n    this.parent.player.start_stream()\n  }\n\n  prev_station () {\n    this.parent.player.change_stream()\n    this.parent.player.start_stream()\n  }\n\n  change_background () {\n    this.parent.background.change();\n  }\n}\n","export default class Info {\n\n    #stream_el;\n    #background_el;\n\n    constructor (parent) {\n      this.parent = parent;\n      this.info_el = parent.info_el;\n    }\n\n    get stream_el () {\n      if (!this.#stream_el) {\n        this.#stream_el = document.createElement(\"div\");\n        this.info_el.appendChild(this.#stream_el);\n      }\n      return this.#stream_el\n    }\n\n    get background_el () {\n      if (!this.#background_el) {\n        this.#background_el = document.createElement(\"div\");\n        this.info_el.appendChild(this.#background_el);\n      }\n      return this.#background_el\n    }\n\n    update_background(background) {\n      if (this.background_el.childNodes.length > 0) {\n        this.background_el.childNodes[0].remove()\n      }\n      let link = document.createElement(\"a\");\n      link.href = background.origin_url;\n      link.target = \"_blank\"\n      link.appendChild(document.createTextNode(background.title))\n      this.background_el.appendChild(link)\n    }\n\n    update_stream(stream) {\n      if (this.stream_el.childNodes.length > 0) {\n        this.stream_el.childNodes[0].remove()\n      }\n      let link = document.createElement(\"a\");\n      link.href = stream.origin_url;\n      link.target = \"_blank\"\n      link.appendChild(document.createTextNode(stream.title));\n      this.stream_el.appendChild(link)\n      this.parent.media.set_title(stream.title);\n    }\n}\n","export default class Media {\n\n  #metadata = {};\n\n  constructor(parent) {\n      this.parent = parent;\n  }\n\n  get media () {\n    if ('mediaSession' in navigator) {\n      return navigator.mediaSession;\n    }\n  }\n\n  set_metadata() {\n    this.media.metadata = new MediaMetadata(this.#metadata);\n  }\n\n  set_artist(artist) {\n    this.#metadata.artist = artist;\n    this.set_metadata()\n  }\n\n  set_title(title) {\n    this.#metadata.title = title;\n    this.set_metadata()\n  }\n\n  set_artwork(url) {\n    this.#metadata.artwork = [{src: url}];\n    this.set_metadata()\n  }\n\n  start() {\n    this.set_artwork(\"favicon.gif\");\n    this.media.setActionHandler('play', this.parent.player.toggle);\n    this.media.setActionHandler('pause', this.parent.player.toggle);\n    this.media.setActionHandler('stop', this.parent.player.toggle);\n    this.media.setActionHandler('seekbackward', this.parent.shortcuts.prev_station);\n    this.media.setActionHandler('seekforward', this.parent.shortcuts.next_station);\n    this.media.setActionHandler('previoustrack', this.parent.shortcuts.prev_station);\n    this.media.setActionHandler('nexttrack', this.parent.shortcuts.next_station);\n  }\n}\n","\nexport default class Gestures {\n\n  GESTURE_DELAY_MS = 200;\n\n  GESTURE_STATE = {\n    \"stopped\": 0,\n    \"started\": 1\n  }\n\n  #body_el;\n  #gesture_state = this.GESTURE_STATE.stopped;\n\n  constructor (parent) {\n    this.parent = parent;\n  }\n\n  get body_el() {\n    if (!this.#body_el) {\n      this.#body_el = document.body;\n    }\n    return this.#body_el;\n  }\n\n  start() {\n    this.body_el.addEventListener(\"touchstart\", this.touch_start.bind(this));\n    this.body_el.addEventListener(\"touchend\", this.touch_stop.bind(this));\n    this.body_el.addEventListener(\"touchcancel\", this.touch_stop.bind(this));\n  }\n\n  touch_start(e) {\n    this.#gesture_state = this.GESTURE_STATE.started;\n\n    setTimeout(this.timer_end.bind(this),this.GESTURE_DELAY_MS);\n  }\n\n  touch_stop(e) {\n    this.#gesture_state = this.GESTURE_STATE.stopped;\n  }\n\n  timer_end() {\n    if(this.#gesture_state == this.GESTURE_STATE.stopped) {\n      //tapped\n      this.parent.player.toggle();\n    }\n  }\n}\n","import StaticPlayer from \"./static.js\";\n\nlet static_player;\n\n(function () {\n  static_player = new StaticPlayer();\n  static_player.run();\n})();\n","import Player from \"./player.js\";\nimport Background from \"./background.js\";\nimport Shortcuts from \"./shortcuts.js\";\nimport Info from \"./info.js\";\nimport Media from \"./media.js\";\nimport Gestures from \"./gestures.js\";\n\n\nexport default class StaticPlayer {\n  BACKGROUND_VIDEO_EL_ID = \"background-video\"\n  BACKGROUND = Background;\n\n  PLAYER_EL_ID = \"player\";\n  PLAYER = Player;\n\n  SHORTCUTS = Shortcuts;\n\n  INFO_EL_ID = \"info\";\n  INFO = Info;\n\n  MEDIA = Media;\n\n  GESTURES = Gestures;\n\n  #background_video;\n  #background;\n  #player_el;\n  #player;\n  #shortcuts;\n  #info_el;\n  #info;\n  #media;\n  #gestures;\n\n\n  get background_video_el (){\n    if (!this.#background_video){\n      this.#background_video = document.getElementById(this.BACKGROUND_VIDEO_EL_ID);\n    }\n    return this.#background_video;\n  }\n\n  get background() {\n    if (!this.#background) {\n      this.#background = new this.BACKGROUND(this);\n    }\n    return this.#background;\n  }\n\n  get player_el (){\n    if (!this.#player_el) {\n      this.#player_el = document.getElementById(this.PLAYER_EL_ID);\n    }\n    return this.#player_el;\n  }\n\n  get player(){\n    if(!this.#player) {\n      this.#player = new this.PLAYER(this);\n    }\n    return this.#player;\n  }\n\n  get shortcuts() {\n    if (!this.#shortcuts) {\n      this.#shortcuts = new this.SHORTCUTS(this);\n    }\n    return this.#shortcuts;\n  }\n\n  get info_el (){\n    if (!this.#info_el) {\n      this.#info_el = document.getElementById(this.INFO_EL_ID);\n    }\n    return this.#info_el;\n  }\n\n  get info(){\n    if(!this.#info) {\n      this.#info = new this.INFO(this);\n    }\n    return this.#info;\n  }\n\n  get media () {\n    if(!this.#media) {\n      this.#media = new this.MEDIA(this);\n    }\n    return this.#media;\n  }\n\n  get gestures () {\n    if(!this.#gestures) {\n      this.#gestures = new this.GESTURES(this);\n    }\n    return this.#gestures;\n  }\n\n  run() {\n    this.shortcuts.setup();\n    this.player.start();\n    this.background.start();\n    this.media.start();\n    this.gestures.start();\n  }\n}\n"],"names":["YouTube","constructor","parent","this","player_el","stream_url","stream","url","setup","that","document","createElement","setAttribute","addEventListener","e","play","appendChild","state","post_message","message","contentWindow","postMessage","stop","destroy","remove","undefined","Player","STREAMS_URL","SOURCES","get_json","callback","fetch","then","response","ok","Error","status","json","handle_streams","streams","random_choice","arr","Math","floor","random","length","random_stream","Object","keys","map","key","change_stream","start_stream","localStorage","getItem","source","info","update_stream","URL","hostname","setItem","id","pause","toggle","clear","start","bind","BackgroundVideo","BACKGROUND_VIDEO_URL","background_video_el","defaultPlaybackRate","handle_backgrounds","backgrounds","random_background","stream_changed","player","background","update_background","change","get_backgrounds","Shortcuts","KEY_MAP","playpause","next_station","prev_station","change_background","media","window","event","code","call","Info","info_el","stream_el","background_el","childNodes","link","href","origin_url","target","createTextNode","title","set_title","Media","navigator","mediaSession","set_metadata","metadata","MediaMetadata","set_artist","artist","set_artwork","artwork","src","setActionHandler","shortcuts","Gestures","GESTURE_DELAY_MS","GESTURE_STATE","stopped","body_el","body","touch_start","touch_stop","started","setTimeout","timer_end","static_player","BACKGROUND_VIDEO_EL_ID","BACKGROUND","PLAYER_EL_ID","PLAYER","SHORTCUTS","INFO_EL_ID","INFO","MEDIA","GESTURES","getElementById","gestures","run"],"sourceRoot":""}